
date: 2002/06/11 22:16:45;  author: jer;  state: Exp;  lines: +1 -1
fixing two old bugs,
pth 1.4.1 will now work correctly, we force the socket into blocking mode (thanks to Miguel Gomard <m.gomard@ilius.net>)
high ports for SRV work as well, using 6 bytes as allocated (thanks to "Safford, Brian" <brian.safford@eds.com>)

Index: jabberd/mio_raw.c
===================================================================
RCS file: /home/cvs/jabberd14/jabberd/mio_raw.c,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -r1.7 -r1.8
--- jabberd/mio_raw.c	8 Feb 2002 07:44:13 -0000	1.7
+++ jabberd/mio_raw.c	11 Jun 2002 22:16:45 -0000	1.8
@@ -71,6 +71,6 @@
     sigaddset(&set, SIGUSR2);
 
     wevt = pth_event(PTH_EVENT_SIGS, &set, &sig);
-
+    pth_fdmode(m->fd, PTH_FDMODE_BLOCK);
     return pth_connect_ev(m->fd, serv_addr, addrlen, wevt);
 }
